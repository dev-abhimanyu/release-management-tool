<%- include('partials/head') %>
    <body>
        <% if(isDuplicate == 'true'){ %> 
        <!-- Modal -->
        <div class="modal fade" id="duplicateModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
            aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="staticBackdropLabel">Already exists</h5>
                        <!-- <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> -->
                    </div>
                    <div class="modal-body">
                        The release already exists! Please recheck the release number or use the search option to query existing releases.
                    </div>
                    <div class="modal-footer">
                        <!-- <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button> -->
                        <!-- <a href="/releases/new"><button type="button" class="btn btn-primary">Ok</button></a> -->
                        <a class="btn btn-primary" href="/releases/new" role="button">Ok</a>
                    </div>
                </div>
            </div>
        </div>
        <script src="/js/duplicate_modal.js"></script>
        <% } %> 
        <div class="container-fluid">
            <div class="row">
                <div class="col-0 col-md-2"></div>
                <div class="col-12 col-md-8">
                    <%- include('partials/navbar') %>
                        <div class="card">
                            <div class="card-body">
                                <div class="jumbotron">
                                    <h1 class="display-4">Add a new release</h1>
                                    <p class="lead">Create an entry for a new release in the database</p>
                                </div>
                                <hr class="my-4">
                                <!-- <h1>New Release</h1> -->
                                <form method="POST" , action="/releases" id="newForm" name="newForm">
                                    <div class="row mb-3">
                                        <label for="releaseNumber" class="col-sm-2 col-form-label">Release
                                            Number<sup>*</sup></label>
                                        <div class="col-sm-4">
                                            <input type="text" class="form-control" name="releaseNumber"
                                                id="releaseNumber" placeholder="Release Number" required>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <label for="customerSelect"
                                            class="col-sm-2 col-form-label">Customer<sup>*</sup></label>
                                        <div class="col-sm-4">
                                            <select class="form-select" id="customerSelect" name="customerSelect"
                                                aria-label="customerSelect" onchange="CheckCustomer(this.value);">
                                                <option value="undefined" selected>Select</option>
                                                <% for(c of customers){ %>
                                                    <option value="<%= c %>">
                                                        <%= c %>
                                                    </option>
                                                    <% } %>
                                                        <option value="new">Other</option>
                                            </select>
                                        </div>
                                        <div class="col-sm-4">
                                            <input type="text" class="form-control" name="customerInput"
                                                id="customerInput" placeholder="Customer" style='display:none;'>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <label for="moduleSelect"
                                            class="col-sm-2 col-form-label">Module<sup>*</sup></label>
                                        <div class="col-sm-4">
                                            <select class="form-select" id="moduleSelect" name="moduleSelect"
                                                aria-label="moduleSelect" onchange="CheckModule(this.value);">
                                                <option value="undefined" selected>Select</option>
                                                <% for(m of modules){ %>
                                                    <option value="<%= m %>">
                                                        <%= m %>
                                                    </option>
                                                    <% } %>
                                                        <option value="new">Other</option>
                                            </select>
                                        </div>
                                        <div class="col-sm-4">
                                            <input type="text" class="form-control" name="moduleInput" id="moduleInput"
                                                placeholder="Module" style='display:none;'>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <label for="statusSelect"
                                            class="col-sm-2 col-form-label">Status<sup>*</sup></label>
                                        <div class="col-sm-4">
                                            <select class="form-select" id="statusSelect" name="statusSelect"
                                                aria-label="statusSelect" onchange="CheckStatus(this.value);">
                                                <option value="undefined" selected>Select</option>
                                                <% for(s of status){ %>
                                                    <option value="<%= s %>">
                                                        <%= s %>
                                                    </option>
                                                    <% } %>
                                                        <!-- <option value="new">Other</option> -->
                                            </select>
                                        </div>
                                        <!-- <div class="col-sm-4">
                                            <input type="text" class="form-control" name="statusInput" id="statusInput"
                                                placeholder="Status" style='display:none;'>
                                        </div> -->
                                    </div>
                                    <div class="row mb-3">
                                        <label for="desc" class="col-sm-2 col-form-label">Description</label>
                                        <div class="col-sm-4">
                                            <textarea class="form-control" name="desc" id="desc"
                                                placeholder="Description" style="height: 100px"></textarea>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-auto">
                                            <button type="submit" class="btn btn-primary">Submit</button>
                                        </div>
                                        <div class="col-auto">
                                            <span id="formError" style='color:red;display:none;'><small>Fields marked
                                                    with * are mandatory.</small></span>
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <%- include('partials/footer') %>
                        </div>
                </div>
                <div class="col-0 col-md-2"></div>
            </div>
        </div>
        <script src="/js/new_script.js"></script>
    </body>

    </html>